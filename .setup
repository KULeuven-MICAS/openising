# Common source file to set up project environment

# Pointer to repo-top
export TOP=$(git rev-parse --show-toplevel)

# Make sure to include 
export PYTHONPATH="$TOP"

# If a python virtual env is present, activate it
[[ -e $TOP/.venv/bin/python ]]
VIRTUAL_ENV_DISABLE_PROMPT=1; 
source $TOP/.venv/bin/activate
export PYTHON=$TOP/.venv/bin/python3.12

# Load requirements.txt (should usually not update anything)
pip --python $PYTHON install --quiet -r ./requirements.txt
PYDEVD_WARN_EVALUATION_TIMEOUT=10

export AMOUNT_CORES=16
export MKL_NUM_THREADS=$((AMOUNT_CORES/4))
export NUMEXPR_NUM_THREADS=$((AMOUNT_CORES/4))
export OMP_NUM_THREADS=$((AMOUNT_CORES/4))
export OPENBLAS_NUM_THREADS=$((AMOUNT_CORES/4))
